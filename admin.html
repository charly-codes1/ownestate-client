<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin || OwnEstate</title>

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Anek+Latin:wght@100..800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/admin.css" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
</head>

<body>
    <div class="dashboard-container">
        <!-- Header Section -->
        <header class="dashboard-header">
            <div class="logo">Own<span>Estate</span></div>
            <nav class="dashboard-nav">
                <a class="nav-link" href="home.html">Home</a>
                <a class="nav-link" href="invest.html">Invest</a>
                <a class="nav-link" href="Dashboard.html">Dashboard</a>
                <a class="nav-link admin" href="admin.html">Admin</a>
            </nav>
            <div class="auth-buttons">
                <a href="welcome.html"><button class="signup-btn">Log Out</button></a>
            </div>
        </header>
        <hr>
        <!-- Welcome Section -->
        <div class="welcome-section">
            <div class="welcome-message">
                <img src="images/Ellipse 1.png" alt="User Profile" class="profile-pic" />
                <h1>Welcome Olama Real Estate,</h1>
            </div>
            <div class="notifications">
                <span class="notification-bell">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="40"
              height="40"
              viewBox="0 0 24 24"
            >
              <g fill="#1D3557">
                <path
                  d="M2.038 5.61A2 2 0 0 0 2 6v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6q0-.18-.03-.352l-.866.65l-7.89 6.032a2 2 0 0 1-2.429 0L2.884 6.288l-.846-.677Z"
                />
                <path
                  d="M20.677 4.117A2 2 0 0 0 20 4H4q-.338.002-.642.105l.758.607L12 10.742L19.9 4.7z"
                />
              </g>
            </svg>
          </span>
                <span class="notification-count">7</span>
            </div>
        </div>

        <!-- Investment Summary -->
        <div class="investment-summary">
            <div class="summary-left">
                <div class="summary-card">
                    <h2>Total Investment: N 7,500,000</h2>
                </div>

                <div class="project-stats">
                    <span>Active projects: <strong>2</strong></span>
                    <span class="completed">Completed projects: <strong>3</strong></span
            >
            <span>Pending projects: <strong>1</strong></span>
                </div>
            </div>

            <div class="summary-right">
                <div class="summary-card2">
                    <h2>Total Projects:</h2>
                    <p class="amount">6</p>
                </div>
                <div>
                    <button class="manage-btn">Manage projects</button>
                    <button class="add-btn">Add new project</button>
                </div>
            </div>
        </div>

        <!-- Investment Analytics -->
        <div class="analytics-section">
            <h2>Investment Analytics</h2>
            <div class="chart">
                <canvas id="investmentChart"></canvas>
            </div>
        </div>

        <section class="table-section">
            <h2>Investment Overview</h2>
            <table class="investment-table">
                <thead>
                    <tr>
                        <th>S/N</th>
                        <th>NAME</th>
                        <th>AMOUNT</th>
                        <th>PROJECT</th>
                        <th>ROI</th>
                        <th>LAST DEPOSIT</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Kwame Adom</td>
                        <td>N3,000,000</td>
                        <td>Comfort Home</td>
                        <td>+N700,000</td>
                        <td>31/5/2023</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Sophia Carter</td>
                        <td>N2,750,000</td>
                        <td>Olama Shortlets</td>
                        <td>+N650,000</td>
                        <td>22/3/2022</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Amina Okafor</td>
                        <td>N2,700,000</td>
                        <td>Greenland Estate</td>
                        <td>+N630,000</td>
                        <td>14/11/2023</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>Liam Robinson</td>
                        <td>N2,570,000</td>
                        <td>Comfort Homes</td>
                        <td>+N550,000</td>
                        <td>03/07/2024</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Chike Obi</td>
                        <td>N2,300,000</td>
                        <td>Olama Estate</td>
                        <td>+N450,000</td>
                        <td>01/01/2025</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Isabella Martinez</td>
                        <td>N2,250,000</td>
                        <td>Luxury Homes</td>
                        <td>+N400,000</td>
                        <td>05/01/2025</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>Emily Thompson</td>
                        <td>N2,100,000</td>
                        <td>Greenland Estate</td>
                        <td>+N370,000</td>
                        <td>09/12/2024</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Kofi Mensah</td>
                        <td>N900,000</td>
                        <td>Luxury Homes</td>
                        <td>+N300,000</td>
                        <td>30/10/2024</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>Kwame Adom</td>
                        <td>N900,000</td>
                        <td>Holama Hotels</td>
                        <td>+N300,000</td>
                        <td>16/08/2023</td>
                    </tr>
                    <tr>
                        <td>10</td>
                        <td>Tariq Ndlovu</td>
                        <td>N870,000</td>
                        <td>Luxury Homes</td>
                        <td>+N250,000</td>
                        <td>05/12/2024</td>
                    </tr>
                </tbody>
            </table>
            <div class="table-footer">
                <button class="export-btn" onclick="exportTableToCSV()">
            Export as CSV
          </button>
            </div>
        </section>

        <!-- Add New Project Modal -->
        <div class="modal" id="addProjectModal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <h2>Edit Property Details</h2>
                <div class="modal-form">
                    <img id="previewImage" src="" alt="Property Image" class="preview-img" style="display: none" />
                    <form id="addProjectForm">
                        <label for="propertyName">Property Name</label>
                        <input type="text" id="propertyName" required />

                        <label for="description">Description</label>
                        <textarea id="description" required></textarea>

                        <label for="location">Location</label>
                        <input type="text" id="location" required />

                        <label for="price">Price</label>
                        <input type="number" id="price" required />

                        <label for="roi">ROI (%)</label>
                        <input type="number" id="roi" required />

                        <label for="images">Insert Images</label>
                        <input type="file" id="images" multiple accept="image/*" onchange="previewImages()" />

                        <button type="submit">Continue</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <section class="footer">
            <div class="footer-first">
                <div class="logo">
                    <a href="./frontend/home.html " class="nav-logo">Own<span class="estate">Estate</span></a
            >
          </div>
          <div class="footer__first-text">
            <p>
              OwnEstate simplifies <br />
              real estate investments, <br />
              making them accessible <br />
              and secure for everyone.
            </p>
          </div>
          <div class="footer__first-socials">
            <a href="# " target="_blank "
              ><img src="images/dashboard/twitter.png" alt="X "
            /></a>
                    <a href="# " target="_blank "><img src="images/dashboard/LinkedIn.png" alt="LinkedIn " /></a>
                    <a href="# " target="_blank "><img src="images/dashboard/instagram.png" alt="instagram " /></a>
                </div>
            </div>
            <div class="footer-second">
                <div class="quick-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li>
                            <a class="list-links" href="index.html">Home</a>
                        </li>
                        <li><a class="list-links" href="# ">Explore Projects</a></li>
                        <li>
                            <a class="list-links" href="Dashboard.html">Dashboard</a
                >
              </li>
              <li><a class="list-links" href="# ">Terms & Conditions</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-third">
                <div class="contact-us">
                    <h3>Contact Us</h3>

                    <div class="lists">
                        <div class="row">
                            <div class="column">
                                <img src="images/dashboard/call.png" />
                                <p>support@ownestate.com</p>
                            </div>
                            <div class="column">
                                <img src="images/dashboard/envelope.png" />
                                <p>+1 234 567 8900</p>
                            </div>
                            <div class="column">
                                <img class="house" src="images/dashboard/house.png" />
                                <p>
                                    OwnEstate HQ, <br /> 123 Innovation Street, <br /> Lagos, Nigeria.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="copyright">© 2024 OwnEstate. All Rights Reserved.</div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function exportTableToCSV() {
            const rows = document.querySelectorAll(".investment-table tr");
            let csvContent = "S/N,NAME,AMOUNT,PROJECT,ROI,LAST DEPOSIT\n"; // Add headers

            rows.forEach((row) => {
                const cols = row.querySelectorAll("td, th"); // Get all cells (th or td)
                const rowData = [];
                cols.forEach((col) => {
                    rowData.push(col.innerText); // Get text content of each cell
                });
                csvContent += rowData.join(",") + "\n"; // Add row data to CSV content
            });

            // Create a Blob from the CSV content
            const blob = new Blob([csvContent], {
                type: "text/csv;charset=utf-8;", // Specify the character set
            });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.setAttribute("download", "investment_overview.csv"); // Set the file name
            document.body.appendChild(link); // Append to the body for Firefox compatibility
            link.click(); // Trigger the download
            document.body.removeChild(link); // Clean up
        }

        // Chart.js code
        const ctx = document.getElementById("investmentChart").getContext("2d");

        const data = {
            labels: [
                "Olama Hotels",
                "Olama Shortlets",
                "Greenland Estate",
                "Luxury Homes",
                "Olama Estate",
                "Comfort Homes",
            ],
            datasets: [{
                label: "Investment Progress",
                data: [20, 40, 10, 100, 100, 100],
                backgroundColor: [
                    "rgb(255, 255, 255)",
                    "rgb(255, 255, 255)",
                    "rgb(255, 255, 255)",
                    "rgb(0, 219, 0)",
                    "rgb(0, 219, 0)",
                    "rgb(0, 219, 0)",
                ],
            }, ],
        };

        const config = {
            type: "bar",
            data: data,
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                    },
                },
            },
        };

        new Chart(ctx, config);

        // Get the modal
        const modal = document.getElementById("addProjectModal");

        // Get the button that opens the modal
        const addBtn = document.querySelector(".add-btn");

        // Get the <span> element that closes the modal
        const closeBtn = document.querySelector(".close-btn");

        // When the user clicks the button, open the modal
        addBtn.onclick = function() {
            modal.style.display = "block";
        };

        // When the user clicks on <span> (x), close the modal
        closeBtn.onclick = function() {
            modal.style.display = "none";
        };

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        };

        // Handle form submission (optional)
        document.getElementById("addProjectForm").onsubmit = function(event) {
            event.preventDefault();
            // You can add logic to process the form data here
            alert("Project added!"); // Placeholder alert
            modal.style.display = "none"; // Close the modal
        };

        function previewImages() {
            const fileInput = document.getElementById("images");
            const previewImage = document.getElementById("previewImage");

            const files = fileInput.files;
            if (files.length > 0) {
                const reader = new FileReader();

                reader.onload = function(e) {
                    previewImage.src = e.target.result; // Set the image source to the loaded file
                    previewImage.style.display = "block"; // Show the image
                };

                reader.readAsDataURL(files[0]); // Read the first selected file
            }
        }
    </script>
</body>

</html>