<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Investors | OwnEstate</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Anek+Latin:wght@100..800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/investors.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="/site.webmanifest" />
  </head>

  <body>
    <main class="main">
      <div class="container">
        <div class="heading">
          <a href="./home.html" class="back-link"
            ><img
              src="images/investing/Group 1.png"
              alt="back-arrow"
              height="30px"
            />
          </a>
          <span class="own">Own</span><span class="estate">Estate</span>
        </div>
        <div class="investors-details">
          <div class="image-container">
            <img src="./Images/investing/7xm.xyz500303.jpg" alt="pana" />
          </div>
          <div class="form-container">
            <h2 class="investor-header">Join as an Investor</h2>
            <p class="investor-text">
              Start your journey in real estate investment today!
            </p>
            <form>
              <label for="name" class="name">First Name</label>
              <input
                type="text"
                title="First Name"
                placeholder="Enter your first name"
              />
              <label for="name" class="name">Last Name</label>
              <input
                type="text"
                title="Last Name"
                placeholder="Enter your last name"
              />
              <label for="email" class="name">Email</label>
              <input
                type="email"
                title="Email"
                placeholder="Enter your email"
              />
              <div class="user-box">
                <label for="password" class="name">Password</label>
                <input
                  type="password"
                  name="password"
                  id="password"
                  title="Password"
                  placeholder="Enter your password"
                  required=""
                />
                <span class="password-toggle-icon">
                  <svg
                    class="eye-open"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                  >
                    <g
                      fill="none"
                      stroke="#F4A261"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                    >
                      <path d="M3 13c3.6-8 14.4-8 18 0" />
                      <path
                        fill="#F4A261"
                        d="M12 17a3 3 0 1 1 0-6a3 3 0 0 1 0 6"
                      />
                    </g>
                  </svg>
                </span>
                <label for="name" class="name">Confirm Password</label>
                <input
                  type="password"
                  id="confirm-password"
                  title="Confirm Password"
                  placeholder="Confirm your password"
                  required=""
                />
                <span class="password__toggle-icon">
                  <svg
                    class="eye-opened"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                  >
                    <g
                      fill="none"
                      stroke="#F4A261"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                    >
                      <path d="M3 13c3.6-8 14.4-8 18 0" />
                      <path
                        fill="#F4A261"
                        d="M12 17a3 3 0 1 1 0-6a3 3 0 0 1 0 6"
                      />
                    </g>
                  </svg>
                  <i class="fas fa-eye-slash"></i>
                </span>
                <!-- <span class="password-toggle-icon"
                  ><i class="fas fa-eye"></i
                ></span> -->
              </div>
              <div class="terms">
                <input type="checkbox" id="terms" />
                <label for="terms"
                  >By signing up, you agree to our
                  <a href="#" class="sign">Terms and Conditions</a></label
                >
              </div>
              <div class="links">
                <p>
                  Already have an account?
                  <a href="./welcome.html" class="sign"> Sign In!</a>
                  Forgot password?
                  <a href="./Reset.html" class="sign"> Click here!</a>
                </p>
              </div>
              <button onclick="location.href='./invest.html';" type="submit">
                Sign Up
              </button>
            </form>
          </div>
        </div>
      </div>
    </main>
    <script src="scripts/investors.js">

      document.getElementById("signup-form").addEventListener("submit", async function (e) {
        e.preventDefault();

        const firstName = document.getElementById("first-name").value.trim();
        const lastName = document.getElementById("last-name").value.trim();
        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value.trim();
        const confirmPassword = document.getElementById("confirm-password").value.trim();
        const termsAccepted = document.getElementById("terms").checked;

        if (password !== confirmPassword) {
          alert("Passwords do not match!");
          return;
        }

        if (!termsAccepted) {
          alert("You must accept the Terms and Conditions to sign up.");
          return;
        }

        const payload = {
          firstName,
          lastName,
          email,
          password,
        };

        try {
          const response = await fetch("https://own-estate.onrender.com/api/auth/register", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(payload),
          });

          const result = await response.json();
          console.log(result);
          if (response.ok) {
            alert("Signup successful! Welcome to OwnEstate.");
            window.location.href = "/welcome.html";
          } else {
            alert(`Signup failed: ${result.message}`);
          }
        } catch (error) {
          console.error("Error signing up:", error);
          alert("An error occurred. Please try again later.");
        }
      });
    </script>
  </body>
</html>
